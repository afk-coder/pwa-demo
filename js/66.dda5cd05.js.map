{"version":3,"file":"js/66.dda5cd05.js","mappings":"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","sources":["webpack://sl-device-vue/./src/components/CustomFileUpload/index.vue","webpack://sl-device-vue/./src/components/CustomPhoto/index.vue","webpack://sl-device-vue/src/components/CustomPhoto/index.vue","webpack://sl-device-vue/./src/components/CustomPhoto/index.vue?0325","webpack://sl-device-vue/./src/components/CustomPhoto/index.vue?5846","webpack://sl-device-vue/src/components/CustomFileUpload/index.vue","webpack://sl-device-vue/./src/components/CustomFileUpload/index.vue?46c2","webpack://sl-device-vue/./src/components/CustomFileUpload/index.vue?ff47","webpack://sl-device-vue/./src/views/person/take_photo.vue","webpack://sl-device-vue/src/views/person/take_photo.vue","webpack://sl-device-vue/./src/views/person/take_photo.vue?e975","webpack://sl-device-vue/./src/views/person/take_photo.vue?fa5c"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('van-uploader',{attrs:{\"accept\":_vm.accept,\"name\":_vm.name,\"max-count\":_vm.maxCount,\"capture\":_vm.capture,\"before-delete\":_vm.beforeDelete},on:{\"click-upload\":function($event){$event.preventDefault();return _vm.clickUpload.apply(null, arguments)}},model:{value:(_vm.fileList),callback:function ($$v) {_vm.fileList=$$v},expression:\"fileList\"}}),_c('custom-photo',{ref:\"uploader\",attrs:{\"accept\":_vm.accept,\"name\":_vm.name,\"max-count\":_vm.maxCount,\"capture\":_vm.capture},on:{\"onPhoto\":_vm.onPhoto}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('van-uploader',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],ref:\"uploader\",attrs:{\"accept\":_vm.accept,\"name\":_vm.name,\"max-count\":_vm.maxCount,\"capture\":_vm.capture,\"before-read\":_vm.beforeRead,\"after-read\":_vm.afterRead}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <van-uploader\r\n      v-show=\"false\"\r\n      ref=\"uploader\"\r\n      :accept=\"accept\"\r\n      :name=\"name\"\r\n      :max-count=\"maxCount\"\r\n      :capture=\"capture\"\r\n      :before-read=\"beforeRead\"\r\n      :after-read=\"afterRead\" />\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nexport default {\r\n  name: 'CustomPhoto',\r\n  props: {\r\n    name: {\r\n      type: String,\r\n      require: true\r\n    },\r\n    accept: {\r\n      type: String,\r\n      require: true\r\n    },\r\n    maxCount: {\r\n      type: String,\r\n      require: true,\r\n      default() {\r\n        return '3'\r\n      }\r\n    },\r\n    capture: {\r\n      type: String,\r\n      require: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      fileType: {\r\n        'attachs': [\r\n          'application/vnd.ms-excel',\r\n          'application/msword', 'application/pdf',\r\n          'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n          'application/vnd.openxmlformats-officedocument.wordprocessingml.document'\r\n        ],\r\n        'image': ['image/jpeg', 'image/png', 'image/jpg'],\r\n        'audio': []\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n  },\r\n  methods: {\r\n    beforeRead(file, detail) {\r\n      const isFile = this.fileType[detail.name].indexOf(file.type) >= 0\r\n      if (!isFile) {\r\n        this.$toast('文件上传格式错误')\r\n        return false\r\n      }\r\n      return true\r\n    },\r\n    afterRead(file) {\r\n      this.$emit('onPhoto', file)\r\n    },\r\n    take() {\r\n      this.$nextTick(() => {\r\n        this.$refs.uploader.chooseFile()\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=91ed2b4a&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"91ed2b4a\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n    <van-uploader\r\n      v-model=\"fileList\"\r\n      :accept=\"accept\"\r\n      :name=\"name\"\r\n      :max-count=\"maxCount\"\r\n      :capture=\"capture\"\r\n      :before-delete=\"beforeDelete\"\r\n      @click-upload.prevent=\"clickUpload\"/>\r\n    <custom-photo\r\n      ref=\"uploader\"\r\n      :accept=\"accept\"\r\n      :name=\"name\"\r\n      :max-count=\"maxCount\"\r\n      :capture=\"capture\"\r\n      @onPhoto=\"onPhoto\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CustomPhoto from '@/components/CustomPhoto/index.vue'\r\n\r\nexport default {\r\n  name: 'CustomFileUpload',\r\n  components: {CustomPhoto},\r\n  props: {\r\n    name: {\r\n      type: String,\r\n      require: true\r\n    },\r\n    accept: {\r\n      type: String,\r\n      require: true\r\n    },\r\n    maxCount: {\r\n      type: String,\r\n      require: true,\r\n      default() {\r\n        return '3'\r\n      }\r\n    },\r\n    capture: {\r\n      type: String,\r\n      require: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      fileList: []\r\n    }\r\n  },\r\n  created() {\r\n  },\r\n  mounted() {\r\n    this.$on('input', res => {\r\n      console.log(res)\r\n      this.fileList = res\r\n    })\r\n  },\r\n  methods: {\r\n    beforeDelete(file) {\r\n      this.fileList.splice(file, 1)\r\n      this.$emit('input', this.fileList)\r\n    },\r\n    onPhoto(file) {\r\n      const fileFormData = new FormData()\r\n      fileFormData.append('file', file.file)\r\n      this.$postFile('/upload/file', fileFormData).then(res => {\r\n        this.fileList.push({ url: this.$api.baseImage + res, isImage: true })\r\n        this.$emit('input', this.fileList)\r\n      }).catch(() => {\r\n      })\r\n    },\r\n    clickUpload(event) {\r\n      event.preventDefault()\r\n      // 判断是否H5\r\n      console.log(this.$utils.isPwa())\r\n      if (this.$utils.isPwa()) {\r\n        this.$refs.uploader.take()\r\n      } else {\r\n        this.$bridge.CollectPhoto(0).then(res => {\r\n          if (!res) {\r\n            this.$toast('未选择图片')\r\n          } else {\r\n            this.$post('/upload/image', { base64: res }).then(res => {\r\n              this.fileList.push({ url: this.$api.baseImage + res, isImage: true })\r\n              this.$emit('input', this.fileList)\r\n            }).catch(() => {\r\n            })\r\n          }\r\n        })\r\n      }\r\n      // this.$bridge.DeviceInfo().then(res => {\r\n      //   console.log(res)\r\n      //   if (res.platform === 'ios' || res.platform === 'android') {\r\n      //     this.$bridge.CollectPhoto(0).then(res => {\r\n      //       if (!res) {\r\n      //         this.$toast('未选择图片')\r\n      //       } else {\r\n      //         const base64 = 'data:image/png;base64,' + res\r\n      //         this.fileList.push({ content: base64, url: base64, isImage: true })\r\n      //       }\r\n      //     })\r\n      //   } else {\r\n      //     this.$refs.uploader.take()\r\n      //   }\r\n      // })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0cab2d65&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0cab2d65\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('custom-file-upload',{model:{value:(_vm.fileList),callback:function ($$v) {_vm.fileList=$$v},expression:\"fileList\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <custom-file-upload v-model=\"fileList\" />\r\n<!--    <van-uploader :after-read=\"afterRead\" @click-upload=\"clickUpload\" />-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CustomFileUpload from '@/components/CustomFileUpload/index.vue'\r\n\r\nexport default {\r\n  name: 'TakePhoto',\r\n  components: {CustomFileUpload},\r\n  data() {\r\n    return {\r\n      fileList: [\r\n        { url: 'https://img01.yzcdn.cn/vant/leaf.jpg' },\r\n        // Uploader 根据文件后缀来判断是否为图片文件\r\n        // 如果图片 URL 中不包含类型信息，可以添加 isImage 标记来声明\r\n        { url: 'https://cloud-image', isImage: true }\r\n      ]\r\n    }\r\n  },\r\n  mounted() {\r\n  },\r\n  methods: {\r\n    afterRead(file) {\r\n      // 此时可以自行将文件上传至服务器\r\n      console.log(file)\r\n    },\r\n    clickUpload(event) {\r\n      event.preventDefault()\r\n      console.log('2')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./take_photo.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./take_photo.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./take_photo.vue?vue&type=template&id=09db9c56&scoped=true\"\nimport script from \"./take_photo.vue?vue&type=script&lang=js\"\nexport * from \"./take_photo.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"09db9c56\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","accept","name","maxCount","capture","beforeDelete","on","$event","preventDefault","clickUpload","apply","arguments","model","value","fileList","callback","$$v","expression","ref","onPhoto","staticRenderFns","directives","rawName","beforeRead","afterRead","props","type","String","require","default","data","fileType","mounted","methods","file","detail","isFile","indexOf","$toast","$emit","take","$nextTick","$refs","uploader","chooseFile","component","components","CustomPhoto","created","$on","res","console","log","splice","fileFormData","FormData","append","$postFile","then","push","url","$api","baseImage","isImage","catch","event","$utils","isPwa","$bridge","CollectPhoto","$post","base64","CustomFileUpload"],"sourceRoot":""}