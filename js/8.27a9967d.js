"use strict";(self["webpackChunksl_device_vue"]=self["webpackChunksl_device_vue"]||[]).push([[8],{9427:function(t,e,i){i.d(e,{A:function(){return l}});var r=function(){var t=this,e=t._self._c;return e("div",[e("van-card",{staticClass:"card-custom",scopedSlots:t._u([{key:"title",fn:function(){return[e("p",{staticStyle:{"font-size":"14px","font-weight":"bold"}},[e("van-tag",{attrs:{mark:"",type:"primary",size:"medium"}},[t._v("保洁")]),t._v(" "+t._s(t.item.name))],1)]},proxy:!0},{key:"price",fn:function(){return[e("van-tag",{attrs:{type:t.statusChange(t.item.state)}},[t._v(t._s(t._f("stateFilter")(t.item.state)))])]},proxy:!0},{key:"desc",fn:function(){return[e("p",[t._v("从"+t._s(t.item.plan_start)+"开始")])]},proxy:!0},{key:"footer",fn:function(){return[e("van-button",{staticStyle:{width:"80px"},attrs:{round:"",type:"primary",size:"small",icon:"eye-o"},on:{click:function(e){return t.toSign(t.item)}}},[t._v("查看")])]},proxy:!0}])})],1)},s=[],n={name:"CleanCard",filters:{stateFilter(t){const e={0:"未开始",1:"进行中",10:"已完成",20:"已过期"};return e[t]}},props:{item:{type:Object,require:!0,default(){return{}}}},methods:{statusChange(t){const e={0:"default",1:"success",10:"primary",20:"danger"};return e[t]},async toSign(t){this.$utils.routerUrl("/clean/ticket-info",{ticket_id:t.id})}}},a=n,o=i(845),c=(0,o.A)(a,r,s,!1,null,"538e5153",null),l=c.exports},7008:function(t,e,i){i.r(e),i.d(e,{default:function(){return m}});var r=function(){var t=this,e=t._self._c;return e("div",[e("van-tabs",{on:{click:t.activeClick},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.tabList,(function(i,r){return e("van-tab",{key:r,style:"position: fixed; background-color: #f7f8fa; height: 100%",attrs:{title:i}},[e("van-pull-refresh",{style:`height: ${t.refreshHeight}px;overflow:auto;`,on:{refresh:function(e){return t.onRefresh()}},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[0===t.list.length?e("van-empty",{attrs:{image:"search",description:"暂无数据"}}):t._l(t.list,(function(i,r){return e("div",{key:r},["clean"===i.data_type?e("clean-card",{attrs:{item:i}}):t._e(),"qc"===i.data_type?e("qc-card",{attrs:{item:i}}):t._e(),"transport"===i.data_type?e("transport-card",{attrs:{item:i}}):t._e(),"task"===i.data_type?e("task-card",{attrs:{item:i}}):t._e()],1)}))],2)],1)})),1)],1)},s=[],n=i(4277),a=i(5791),o=i(9427),c=i(2982),l={name:"TicketList",components:{TransportCard:c.A,CleanCard:o.A,TaskCard:a.A,QcCard:n.A},filters:{statusFilter(t){const e={0:"未开始",1:"进行中",10:"已完成",20:"已过期"};return e[t]}},data(){return{active:0,tabList:["全部","已完成","已过期"],listAll:[],list:[],refreshing:!1,refreshHeight:window.innerHeight-54}},mounted(){this.getList()},methods:{statusChange(t){const e={0:"default",1:"success",10:"primary",20:"danger"};return e[t]},async getList(){this.active=0;const t=await this.$post("/ticket/list",{});t&&t.length>0?this.listAll=t.filter((t=>10===t.state||20===t.state)):this.listAll=[],this.activeClick(0)},activeClick(t,e){this.list=[],0===t&&(this.list=this.listAll),1===t&&(this.list=this.listAll.filter((t=>10===t.state))),2===t&&(this.list=this.listAll.filter((t=>20===t.state)))},onRefresh(){setTimeout((()=>{this.refreshing=!1,this.getList()}),1e3)}}},u=l,p=i(845),d=(0,p.A)(u,r,s,!1,null,"43b40016",null),m=d.exports},4277:function(t,e,i){i.d(e,{A:function(){return l}});var r=function(){var t=this,e=t._self._c;return e("div",[e("van-card",{staticClass:"card-custom",scopedSlots:t._u([{key:"title",fn:function(){return[e("p",{staticStyle:{"font-size":"14px","font-weight":"bold"}},[e("van-tag",{attrs:{mark:"",type:"primary",size:"medium"}},[t._v("巡更")]),t._v(" "+t._s(t.item.name))],1)]},proxy:!0},{key:"price",fn:function(){return[e("van-tag",{attrs:{type:t.statusChange(t.item.state)}},[t._v(t._s(t._f("stateFilter")(t.item.state)))])]},proxy:!0},{key:"desc",fn:function(){return[e("p",[t._v("从"+t._s(t.item.plan_start)+"开始")])]},proxy:!0},{key:"footer",fn:function(){return[10===t.item.state?e("van-button",{staticStyle:{width:"80px"},attrs:{round:"",type:"primary",size:"small",icon:"eye-o"},on:{click:function(e){return t.toSign(t.item)}}},[t._v("查看")]):t._e(),1!==t.item.plan_type||0!==t.item.state&&1!==t.item.state?t._e():e("van-button",{staticStyle:{width:"80px"},attrs:{round:"",type:"primary",size:"small",icon:"scan"},on:{click:function(e){return t.toSign(t.item)}}},[t._v("签到")]),2!==t.item.plan_type||0!==t.item.state&&1!==t.item.state?t._e():e("van-button",{staticStyle:{width:"80px"},attrs:{round:"",type:"primary",size:"small",icon:"edit"},on:{click:function(e){return t.toSign(t.item)}}},[t._v("签字")])]},proxy:!0}])})],1)},s=[],n={name:"QcCard",filters:{stateFilter(t){const e={0:"未开始",1:"进行中",10:"已完成",20:"已过期"};return e[t]}},props:{item:{type:Object,require:!0,default(){return{}}}},methods:{statusChange(t){const e={0:"default",1:"success",10:"primary",20:"danger"};return e[t]},toSign(t){this.$utils.routerUrl("/qc/step-list",{plan_type:t.plan_type,ticket_id:t.id,report_flag:t.report_flag,scan_flag:t.scan_flag,sign_mode:t.sign_mode})}}},a=n,o=i(845),c=(0,o.A)(a,r,s,!1,null,null,null),l=c.exports},5791:function(t,e,i){i.d(e,{A:function(){return l}});var r=function(){var t=this,e=t._self._c;return e("div",[e("van-card",{staticClass:"card-custom",scopedSlots:t._u([{key:"title",fn:function(){return[e("p",{staticStyle:{"font-size":"14px","font-weight":"bold"}},[e("van-tag",{attrs:{mark:"",type:"primary",size:"medium"}},[t._v("任务")]),t._v(" "+t._s(t.item.name))],1)]},proxy:!0},{key:"price",fn:function(){return[e("van-tag",{attrs:{type:t.statusChange(t.item.state)}},[t._v(t._s(t._f("statusFilter")(t.item.state)))])]},proxy:!0},{key:"desc",fn:function(){return[e("p",[t._v(t._s(t.item.note))])]},proxy:!0},{key:"footer",fn:function(){return[10===t.item.state?e("van-button",{staticStyle:{width:"80px"},attrs:{size:"small",round:"",type:"primary",icon:"eye-o"},on:{click:function(e){return t.detailTask(t.item)}}},[t._v("查看")]):t._e(),10!==t.item.state&&20!==t.item.state?e("van-button",{staticStyle:{width:"80px"},attrs:{size:"small",round:"",type:"primary",icon:"records-o"},on:{click:function(e){return t.dispose(t.item)}}},[t._v("处理")]):t._e()]},proxy:!0}])})],1)},s=[],n={name:"TaskCard",filters:{statusFilter(t){const e={0:"未开始",1:"进行中",10:"已完成",20:"已过期"};return e[t]}},props:{item:{type:Object,require:!0,default(){return{}}}},data(){return{}},mounted(){},methods:{statusChange(t){const e={0:"default",1:"success",10:"primary",20:"danger"};return e[t]},detailTask(t){this.$utils.routerUrl("/ticket/task-detail",{id:t.id,state:t.state})},dispose(t){this.$utils.routerUrl("/ticket/task-dispose",{templateId:t.template_id,id:t.id})}}},a=n,o=i(845),c=(0,o.A)(a,r,s,!1,null,"7e09ea39",null),l=c.exports},2982:function(t,e,i){i.d(e,{A:function(){return l}});var r=function(){var t=this,e=t._self._c;return e("div",[e("van-card",{staticClass:"card-custom",scopedSlots:t._u([{key:"title",fn:function(){return[e("p",{staticStyle:{"font-size":"14px","font-weight":"bold"}},[e("van-tag",{attrs:{mark:"",type:"primary",size:"medium"}},[t._v("运送")]),t._v(" "+t._s(t.item.item_name))],1)]},proxy:!0},{key:"price",fn:function(){return[e("van-tag",{attrs:{type:t.statusChange(t.item.state)}},[t._v(t._s(t._f("stateFilter")(t.item.state)))])]},proxy:!0},{key:"desc",fn:function(){return[e("p",[t._v("运送路径："+t._s(t.item.name))]),e("p",[t._v("下单时间："+t._s(t.item.create_time))]),2===t.item.state?e("p",[t._v("取件时间："+t._s(t.item.get_time))]):t._e(),10===t.item.state?e("p",[t._v("完成时间："+t._s(t.item.complete_time))]):t._e()]},proxy:!0},{key:"footer",fn:function(){return[e("van-button",{staticStyle:{width:"100px"},attrs:{round:"",type:"primary",size:"small",icon:"eye-o"},on:{click:function(e){return t.toSign(t.item)}}},[t._v("查看")]),1===t.item.state?e("van-button",{staticStyle:{width:"100px"},attrs:{round:"",type:"primary",size:"small",icon:"add-o"},on:{click:function(e){return t.toPickUp(t.item)}}},[t._v("取件")]):t._e(),2===t.item.state?e("van-button",{staticStyle:{width:"100px"},attrs:{round:"",type:"primary",size:"small",icon:"checked"},on:{click:function(e){return t.toComplete(t.item)}}},[t._v("确认签收")]):t._e()]},proxy:!0}])})],1)},s=[],n={name:"TransportCard",filters:{stateFilter(t){const e={0:"未开始",1:"已派工",2:"运送中",10:"已完成",20:"已过期"};return e[t]}},props:{item:{type:Object,require:!0,default(){return{}}}},methods:{statusChange(t){const e={0:"default",1:"success",10:"primary",20:"danger"};return e[t]},toSign(t){this.$utils.routerUrl("/transport/info",{ticket_id:t.id})},async toPickUp(t){const e=await this.$dialog.confirm({title:"标题",message:"是否确认取件？"}).catch((()=>{}));e&&(await this.$http.post("/transport-ticket/pick-up",{ticket_id:t.id}),await this.$toast.success("操作成功！"),this.$emit("refreshList"))},toComplete(t){this.$utils.routerUrl("/transport/sign",{ticket_id:t.id})}}},a=n,o=i(845),c=(0,o.A)(a,r,s,!1,null,null,null),l=c.exports}}]);
//# sourceMappingURL=8.27a9967d.js.map