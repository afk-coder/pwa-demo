"use strict";(self["webpackChunksl_device_vue"]=self["webpackChunksl_device_vue"]||[]).push([[66],{2136:function(e,t,i){i.d(t,{A:function(){return h}});var a=function(){var e=this,t=e._self._c;return t("div",[t("van-uploader",{attrs:{accept:e.accept,name:e.name,"max-count":e.maxCount,capture:e.capture,"before-delete":e.beforeDelete},on:{"click-upload":function(t){return t.preventDefault(),e.clickUpload.apply(null,arguments)}},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}}),t("custom-photo",{ref:"uploader",attrs:{accept:e.accept,name:e.name,"max-count":e.maxCount,capture:e.capture},on:{onPhoto:e.onPhoto}})],1)},o=[],n=(i(4114),function(){var e=this,t=e._self._c;return t("div",[t("van-uploader",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"uploader",attrs:{accept:e.accept,name:e.name,"max-count":e.maxCount,capture:e.capture,"before-read":e.beforeRead,"after-read":e.afterRead}})],1)}),s=[],l={name:"CustomPhoto",props:{name:{type:String,require:!0},accept:{type:String,require:!0},maxCount:{type:String,require:!0,default(){return"3"}},capture:{type:String,require:!1}},data(){return{fileType:{attachs:["application/vnd.ms-excel","application/msword","application/pdf","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],image:["image/jpeg","image/png","image/jpg"],audio:[]}}},mounted(){},methods:{beforeRead(e,t){const i=this.fileType[t.name].indexOf(e.type)>=0;return!!i||(this.$toast("文件上传格式错误"),!1)},afterRead(e){this.$emit("onPhoto",e)},take(){this.$nextTick((()=>{this.$refs.uploader.chooseFile()}))}}},r=l,u=i(845),p=(0,u.A)(r,n,s,!1,null,"91ed2b4a",null),c=p.exports,f={name:"CustomFileUpload",components:{CustomPhoto:c},props:{name:{type:String,require:!0},accept:{type:String,require:!0},maxCount:{type:String,require:!0,default(){return"3"}},capture:{type:String,require:!1}},data(){return{fileList:[]}},created(){},mounted(){this.$on("input",(e=>{console.log(e),this.fileList=e}))},methods:{beforeDelete(e){this.fileList.splice(e,1),this.$emit("input",this.fileList)},onPhoto(e){const t=new FormData;t.append("file",e.file),this.$postFile("/upload/file",t).then((e=>{this.fileList.push({url:this.$api.baseImage+e,isImage:!0}),this.$emit("input",this.fileList)})).catch((()=>{}))},clickUpload(e){e.preventDefault(),console.log(this.$utils.isPwa()),this.$utils.isPwa()?this.$refs.uploader.take():this.$bridge.CollectPhoto(0).then((e=>{e?this.$post("/upload/image",{base64:e}).then((e=>{this.fileList.push({url:this.$api.baseImage+e,isImage:!0}),this.$emit("input",this.fileList)})).catch((()=>{})):this.$toast("未选择图片")}))}}},m=f,d=(0,u.A)(m,a,o,!1,null,"0cab2d65",null),h=d.exports},9066:function(e,t,i){i.r(t),i.d(t,{default:function(){return p}});var a=function(){var e=this,t=e._self._c;return t("div",[t("custom-file-upload",{model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})],1)},o=[],n=i(2136),s={name:"TakePhoto",components:{CustomFileUpload:n.A},data(){return{fileList:[{url:"https://img01.yzcdn.cn/vant/leaf.jpg"},{url:"https://cloud-image",isImage:!0}]}},mounted(){},methods:{afterRead(e){console.log(e)},clickUpload(e){e.preventDefault(),console.log("2")}}},l=s,r=i(845),u=(0,r.A)(l,a,o,!1,null,"09db9c56",null),p=u.exports}}]);
//# sourceMappingURL=66.dda5cd05.js.map