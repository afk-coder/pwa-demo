{"version":3,"file":"js/770.99b89c8e.js","mappings":"sKAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,gBAAgBC,YAAY,CAAC,mBAAmB,UAAU,CAACH,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,QAAQ,MAAQ,GAAG,MAAQ,gBAAgB,cAAc,iBAAiB,QAAS,KAASJ,EAAG,MAAM,CAACG,YAAY,CAAC,OAAS,qBAAqB,OAAS,SAAS,CAACH,EAAG,YAAY,CAACK,IAAI,QAAQH,YAAY,cAAcE,MAAM,CAAC,MAAQN,EAAIQ,YAAY,OAAS,IAAI,UAAUR,EAAIS,OAAO,aAAaT,EAAIU,UAAU,aAAaV,EAAIW,UAAU,WAAWX,EAAIY,cAAcC,GAAG,CAAC,iBAAiB,SAASC,GAAQd,EAAIY,aAAaE,CAAM,EAAE,kBAAkB,SAASA,GAAQd,EAAIY,aAAaE,CAAM,MAAM,GAAGZ,EAAG,MAAM,CAACG,YAAY,CAAC,aAAa,WAAW,CAACH,EAAG,aAAa,CAACG,YAAY,CAAC,MAAQ,QAAQC,MAAM,CAAC,MAAQ,GAAG,KAAO,QAAQ,KAAO,SAASO,GAAG,CAAC,MAAQb,EAAIe,cAAc,CAACf,EAAIgB,GAAG,QAAQd,EAAG,aAAa,CAACG,YAAY,CAAC,MAAQ,OAAO,OAAS,QAAQC,MAAM,CAAC,MAAQ,GAAG,KAAO,OAAO,KAAO,QAAQ,KAAO,WAAWO,GAAG,CAAC,MAAQb,EAAIiB,eAAe,CAACjB,EAAIgB,GAAG,SAAS,IAAI,EAClhC,EACIE,EAAkB,GCYtB,G,QAAA,CACAC,KAAA,gBACAC,MAAA,CAEAC,QAAA,CACAC,KAAAC,OACAC,QAAA,KAGAC,IAAAA,GACA,OACAC,QAAA,GACAlB,YAAAmB,SAAAC,KAAAC,YAAA,GACAnB,UAAA,EACAC,UAAA,UACAF,QAAA,EACAG,aAAA,GAEA,EACAkB,OAAAA,GACA,KAAAJ,QAAA,KAAAK,OAAAC,MAAAN,QAEA,KAAAd,aAAA,KAAAS,OACA,EACAY,QAAA,CACAlB,WAAAA,GACA,KAAAmB,MAAAC,MAAAC,OACA,EACA,kBAAAnB,GACA,MAAAoB,QAAA,KAAAH,MAAAC,MAAAG,WAAAC,OAAA,KACA,KAAAC,OAAA,eAGA,IAAAC,QAAA,KAAAC,QAAAD,QAAA,CACAE,MAAA,KACAC,QAAA,YACAL,OAAA,SACA,IAAAE,EAAA,OAEA,MAAAI,EAAA,GACAA,EAAAC,KAAAT,EAAAU,UAAAV,EAAAW,QAAA,eACA,KAAAC,MAAAC,KAAA,gCAAAxB,QAAA,KAAAA,QAAAyB,UAAAN,IACAJ,QAAA,KAAAC,QAAAU,MAAA,CAAAR,QAAA,UACAH,SAEA,KAAAY,QAAAC,MACA,KC5DmS,I,SCO/RC,GAAY,OACd,EACAxD,EACAmB,GACA,EACA,KACA,WACA,MAIF,EAAeqC,EAAiB,O","sources":["webpack://sl-device-vue/./src/views/ticket/transport_qc/sign.vue","webpack://sl-device-vue/src/views/ticket/transport_qc/sign.vue","webpack://sl-device-vue/./src/views/ticket/transport_qc/sign.vue?c58d","webpack://sl-device-vue/./src/views/ticket/transport_qc/sign.vue?47cb"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"app-container\",staticStyle:{\"background-color\":\"white\"}},[_c('van-cell',{attrs:{\"title\":\"请签名确认\",\"value\":\"\",\"label\":\"* 请在空白处录入您的签名\",\"label-class\":\"val-cell-label\",\"border\":false}}),_c('div',{staticStyle:{\"border\":\"1px dashed #dddddd\",\"margin\":\"20px\"}},[_c('vue-esign',{ref:\"esign\",staticClass:\"sign-border\",attrs:{\"width\":_vm.canvasWidth,\"height\":340,\"is-crop\":_vm.isCrop,\"line-width\":_vm.lineWidth,\"line-color\":_vm.lineColor,\"bg-color\":_vm.finalBgColor},on:{\"update:bgColor\":function($event){_vm.finalBgColor=$event},\"update:bg-color\":function($event){_vm.finalBgColor=$event}}})],1),_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('van-button',{staticStyle:{\"width\":\"80px\"},attrs:{\"round\":\"\",\"size\":\"small\",\"icon\":\"clear\"},on:{\"click\":_vm.handleReset}},[_vm._v(\"清空\")]),_c('van-button',{staticStyle:{\"width\":\"80px\",\"margin\":\"20px\"},attrs:{\"round\":\"\",\"type\":\"info\",\"size\":\"small\",\"icon\":\"checked\"},on:{\"click\":_vm.handleCreate}},[_vm._v(\"保存\")])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"app-container\" style=\"background-color: white;\">\r\n    <van-cell title=\"请签名确认\" value=\"\" label=\"* 请在空白处录入您的签名\" label-class=\"val-cell-label\" :border=\"false\" />\r\n    <div style=\"border: 1px dashed #dddddd; margin: 20px;\">\r\n      <vue-esign ref=\"esign\" :width=\"canvasWidth\" :height=\"340\" :is-crop=\"isCrop\" :line-width=\"lineWidth\" :line-color=\"lineColor\" :bg-color.sync=\"finalBgColor\" class=\"sign-border\" />\r\n    </div>\r\n    <div style=\"text-align: center;\">\r\n      <van-button round size=\"small\" icon=\"clear\" style=\"width: 80px\" @click=\"handleReset\">清空</van-button>\r\n      <van-button round type=\"info\" size=\"small\" icon=\"checked\" style=\"width: 80px;margin: 20px;\" @click=\"handleCreate\">保存</van-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'TransportSign',\r\n  props: {\r\n    // 不设置颜色则透明\r\n    bgColor: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      step_id: '',\r\n      canvasWidth: document.body.clientWidth - 20,\r\n      lineWidth: 3,\r\n      lineColor: '#000000',\r\n      isCrop: false,\r\n      finalBgColor: ''\r\n    }\r\n  },\r\n  mounted() {\r\n    this.step_id = this.$route.query.step_id\r\n\r\n    this.finalBgColor = this.bgColor\r\n  },\r\n  methods: {\r\n    handleReset() {\r\n      this.$refs.esign.reset()\r\n    },\r\n    async handleCreate() {\r\n      const res = await this.$refs.esign.generate().catch(() => {\r\n        this.$toast('请先签名，再保存')\r\n      })\r\n\r\n      let confirm = await this.$dialog.confirm({\r\n        title: '标题',\r\n        message: '是否确认保存？'\r\n      }).catch(() => {})\r\n      if (!confirm) return\r\n\r\n      const fileArr = []\r\n      fileArr.push(res.substring(res.indexOf(',') + 1))// 去掉data:image/png;base64,\r\n      await this.$http.post('/work-ticket/qc_step/sign-in', { step_id: this.step_id, file_list: fileArr })\r\n      confirm = await this.$dialog.alert({ message: '操作成功！' })\r\n      if (!confirm) return\r\n      // await this.$bridge.Close(true)\r\n      await this.$router.back()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./sign.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./sign.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./sign.vue?vue&type=template&id=eab128fa&scoped=true\"\nimport script from \"./sign.vue?vue&type=script&lang=js\"\nexport * from \"./sign.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"eab128fa\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","staticStyle","attrs","ref","canvasWidth","isCrop","lineWidth","lineColor","finalBgColor","on","$event","handleReset","_v","handleCreate","staticRenderFns","name","props","bgColor","type","String","default","data","step_id","document","body","clientWidth","mounted","$route","query","methods","$refs","esign","reset","res","generate","catch","$toast","confirm","$dialog","title","message","fileArr","push","substring","indexOf","$http","post","file_list","alert","$router","back","component"],"sourceRoot":""}